import{r as c,b as e}from"./vendor-9a24f32e.js";import{P as F}from"./PageContainer-9d3d18ee.js";import{D as M}from"./DashboardCard-365a522d.js";import{u as R,b as N,L as A}from"./index-6fd738e1.js";import{k as h,G as m,J as g,p as D,B as x,S as p,A as L,m as t,K as j,N as G,O as W,Q as y,R as r,U as Y,d as $}from"./mui-c7c5f84b.js";import{I as H}from"./IconCoin-68b6e027.js";import J from"./IconChevronRight-c883d475.js";const ee=()=>{const[K,b]=c.useState(null),[f,v]=c.useState(""),[S,I]=c.useState(""),[O,C]=c.useState([]),[Q,T]=c.useState([]),[P,k]=c.useState([]),[w,B]=c.useState(""),d=R(),i=new Date().getFullYear(),E=new Date().getMonth()+1;return c.useEffect(()=>{if(!localStorage.getItem("accessToken")){d("/auth/login");return}const a=Array.from({length:E},(n,l)=>({month:String(l+1).padStart(2,"0"),income:0,expense:0,balance:0}));N.get("http://localhost:3001/trans/viewMonth",{headers:{accessToken:localStorage.getItem("accessToken")}}).then(n=>{v(n.data.ttlExpense),B(n.data.ttlIncome),C(n.data.monthlyE),T(n.data.monthlyI),I(n.data.surplus),n.data.monthlyI.forEach(({year:l,month:o,totalAmount:u})=>{if(l===i&&o<=E){const s=parseFloat(u);a[o-1].income=isNaN(s)?"0.00":s.toFixed(2)}}),n.data.monthlyE.forEach(({year:l,month:o,totalAmount:u})=>{if(l===i&&o<=E){const s=parseFloat(u);a[o-1].expense=isNaN(s)?"0.00":s.toFixed(2)}}),a.forEach(l=>{l.balance=(parseFloat(l.income)-parseFloat(l.expense)).toFixed(2)}),k(a)}).catch(n=>{b(n.message)})},[d,E,i]),e.createElement(F,{title:"Balances",description:"Balance Page"},e.createElement(M,{title:"Balances"},e.createElement(h,{maxWidth:"lg"},e.createElement(m,{container:!0,spacing:3,justifyContent:"center"},e.createElement(m,{item:!0,xs:12},e.createElement(g,{variant:"outlined"},e.createElement(D,null,e.createElement(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement(p,{direction:"row",spacing:1,alignItems:"center"},e.createElement(L,{variant:"rounded",sx:{width:40,height:40,bgcolor:"primary.main"}},e.createElement(H,{sx:{width:24,height:24}})),e.createElement(t,{variant:"h6",color:"textPrimary"},i," Surplus"))),e.createElement(t,{variant:"h5",sx:{marginTop:2}},"RM ",S),e.createElement(p,{direction:"row",mt:1},e.createElement(m,{container:!0,spacing:2},e.createElement(m,{item:!0,xs:6},e.createElement(t,{variant:"subtitle2",color:"textPrimary",align:"left"},"Income : RM ",w)),e.createElement(m,{item:!0,xs:6},e.createElement(t,{variant:"subtitle2",color:"textPrimary",align:"left"},"Expenses: RM ",f))))))))),e.createElement(x,{mt:2}),e.createElement(h,{fluid:!0},e.createElement(g,{variant:"outlined"},e.createElement(j,null,e.createElement(G,{"aria-label":"simple table"},e.createElement(W,null,e.createElement(y,null,e.createElement(r,{sx:{width:"10%"}},e.createElement(t,{variant:"subtitle1",color:"textSecondary"},"Month")),e.createElement(r,{align:"right",sx:{width:"25%"}},e.createElement(t,{variant:"subtitle1",color:"textSecondary"},"Income")),e.createElement(r,{align:"right",sx:{width:"25%"}},e.createElement(t,{variant:"subtitle1",color:"textSecondary"},"Expense")),e.createElement(r,{align:"right",sx:{width:"25%"}},e.createElement(t,{variant:"subtitle1",color:"textSecondary"},"Balance")),e.createElement(r,{sx:{width:"15%"}}))),e.createElement(Y,null,P.map(a=>e.createElement(y,{key:a.month},e.createElement(r,null,e.createElement(t,{variant:"subtitle1",color:"textPrimary"},a.month)),e.createElement(r,{align:"right"},e.createElement(t,{variant:"subtitle1",color:"textPrimary"},a.income)),e.createElement(r,{align:"right"},e.createElement(t,{variant:"subtitle1",color:"textPrimary"},a.expense)),e.createElement(r,{align:"right"},e.createElement(t,{variant:"subtitle1",color:"textPrimary"},a.balance)),e.createElement(r,{align:"right"},e.createElement(A,{to:`/transactions?mth=${i}-${a.month}`},e.createElement($,{sx:{minWidth:0,padding:0,color:"text.secondary","&:hover":{color:"primary.main"}},onClick:()=>console.log("Filter clicked")},e.createElement(J,null)))))))))))))};export{ee as default};
