import{r as E,b as e}from"./vendor-9a24f32e.js";import A from"./addexpense-c619d23e.js";import{F as w,a as R,b as $,E as M}from"./formik.esm-6723d0e7.js";import{c as q,a as F,b as k,d as B}from"./index.esm-41945323.js";import{b as P,c as W,a as N,T as O}from"./tabler-icons-react-fe0da12b.js";import{u as V,b as v}from"./index-6fd738e1.js";import{V as D,B as C,m as S,I as H,W as y,X as x,Y as L,l as X,a as Y,d as f,Z as _,$ as j,a0 as K,a1 as U,a2 as Z,a3 as T}from"./mui-c7c5f84b.js";import"./IconCoin-68b6e027.js";import"./IconUser-373a8598.js";import"./IconChevronRight-c883d475.js";const z=r=>{const o=O[r];return o?e.createElement(o,null):e.createElement(N,null)},G={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,borderRadius:2},J=(()=>{const r=new Date,o=r.getFullYear(),m=String(r.getMonth()+1).padStart(2,"0"),c=String(r.getDate()).padStart(2,"0");return`${o}-${m}-${c}`})(),Q={amount:"",remark:"",CategoryId:"",date:J,type:!0},ee=q({amount:F().required("Required").min(.1,"Must be at least 0.1"),remark:k().optional(),CategoryId:k().required("Required"),date:B().required("Required")});function te({open:r,onClose:o,getIncomes:m}){const c=V(),[l,d]=E.useState([]),[h,u]=E.useState(!1),[p,b]=E.useState(""),I=()=>{u(!1)};E.useEffect(()=>{localStorage.getItem("accessToken")?v.get("http://localhost:3001/cate/viewAll",{headers:{accessToken:localStorage.getItem("accessToken")}}).then(n=>{n.data&&d(n.data.cateincome)}).catch(n=>{const t=n.response?n.response.data.message:n.message;b(t),u(!0)}):c("/auth/login")},[c]);const g=n=>{v.post("http://localhost:3001/trans/",n,{headers:{accessToken:localStorage.getItem("accessToken")}}).then(t=>{if(console.log("Server response:",t.data),t.data&&t.data.trans){const a=l.find(i=>i.id===n.CategoryId),s={...t.data.trans,Category:{name:(a==null?void 0:a.name)||"Unknown",Icon:(a==null?void 0:a.Icon)||{icon_class:"IconHelp"}}};m(s),o()}}).catch(t=>{console.error("Error submitting income:",t);const a=t.response?t.response.data.message:t.message;b(a),u(!0)})};return e.createElement(D,{open:r,onClose:o},e.createElement(C,{sx:G},e.createElement(S,{variant:"h6",component:"h2",gutterBottom:!0},"Add Income"),e.createElement(H,{onClick:o,sx:{position:"absolute",top:16,right:16}},e.createElement(P,null)),e.createElement(w,{initialValues:Q,onSubmit:g,validationSchema:ee},({handleChange:n,values:t,errors:a,touched:s})=>e.createElement(R,{className:"formContainer"},e.createElement(y,{fullWidth:!0,margin:"normal"},e.createElement(x,{name:"amount",type:"number",label:"Amount",variant:"outlined",onChange:n,value:t.amount,error:s.amount&&!!a.amount,helperText:s.amount&&a.amount,inputProps:{"aria-label":"Amount"}})),e.createElement(y,{fullWidth:!0,margin:"normal"},e.createElement(L,{id:"CategoryId"},"Category"),e.createElement($,{as:X,name:"CategoryId",label:"Category",labelId:"CategoryId",variant:"outlined",disabledEmpty:!0,error:s.CategoryId&&!!a.CategoryId},l.map(i=>e.createElement(Y,{key:i.id,value:i.id},z(i.Icon.icon_class),i.name))),e.createElement(M,{name:"CategoryId",component:"div",style:{color:"red"}})),e.createElement(y,{fullWidth:!0,margin:"normal"},e.createElement(x,{name:"date",type:"date",label:"Date",variant:"outlined",InputLabelProps:{shrink:!0},onChange:n,value:t.date,error:s.date&&!!a.date,helperText:s.date&&a.date,inputProps:{"aria-label":"Date"}})),e.createElement(y,{fullWidth:!0,margin:"normal"},e.createElement(x,{name:"remark",label:"Remark (optional)",variant:"outlined",onChange:n,value:t.remark,inputProps:{"aria-label":"Remark"}})),e.createElement(f,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,startIcon:e.createElement(W,null)},"Add Income"))),e.createElement(_,{open:h,onClose:I},e.createElement(j,null),e.createElement(K,null,e.createElement(U,null,p)),e.createElement(Z,null,e.createElement(f,{onClick:I,color:"primary"},"OK")))))}const ae={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,borderRadius:2};function pe({open:r,onClose:o,getExpense:m,getIncome:c}){const[l,d]=E.useState(null),h=()=>{d("income")},u=()=>{d("expense")},p=()=>{d(null),o()},b=g=>{m(g)},I=g=>{c(g)};return e.createElement(D,{open:r,onClose:p},e.createElement(C,{sx:ae},e.createElement(S,{variant:"h6",component:"h2",gutterBottom:!0,align:"center"},"Add Transaction"),e.createElement(T,{sx:{mb:4}}),e.createElement(S,{variant:"body1",align:"center",sx:{mb:3}},"Please select a transaction type to continue."),e.createElement(C,{display:"flex",justifyContent:"center",gap:2},e.createElement(f,{variant:"contained",color:"primary",onClick:h,sx:{flex:2}},"Add Income"),e.createElement(f,{variant:"contained",color:"secondary",onClick:u,sx:{flex:2}},"Add Expense")),e.createElement(T,{sx:{my:3}}),l==="income"&&e.createElement(te,{open:l==="income",onClose:p,getIncomes:I}),l==="expense"&&e.createElement(A,{open:l==="expense",onClose:p,getExpenses:b})))}export{pe as default};
